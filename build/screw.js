!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.screw=e():t.screw=e()}(window,(function(){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e),i.d(e,"easing",(function(){return n})),i.d(e,"VERSION",(function(){return R}));var n={};i.r(n),i.d(n,"Linear",(function(){return u})),i.d(n,"QuadraticIn",(function(){return a})),i.d(n,"QuadraticOut",(function(){return o})),i.d(n,"QuadraticInOut",(function(){return c})),i.d(n,"CubicIn",(function(){return h})),i.d(n,"CubicOut",(function(){return f})),i.d(n,"CubicInOut",(function(){return m})),i.d(n,"QuarticIn",(function(){return d})),i.d(n,"QuarticOut",(function(){return l})),i.d(n,"QuarticInOut",(function(){return p})),i.d(n,"QuinticIn",(function(){return _})),i.d(n,"QuinticOut",(function(){return b})),i.d(n,"QuinticInOut",(function(){return y})),i.d(n,"SineIn",(function(){return M})),i.d(n,"SineOut",(function(){return g})),i.d(n,"SineInOut",(function(){return I})),i.d(n,"ExponentialIn",(function(){return O})),i.d(n,"ExponentialOut",(function(){return w})),i.d(n,"ExponentialInOut",(function(){return v})),i.d(n,"CircularIn",(function(){return S})),i.d(n,"CircularOut",(function(){return T})),i.d(n,"CircularInOut",(function(){return E})),i.d(n,"ElasticIn",(function(){return x})),i.d(n,"ElasticOut",(function(){return P})),i.d(n,"ElasticInOut",(function(){return C})),i.d(n,"BackIn",(function(){return B})),i.d(n,"BackOut",(function(){return j})),i.d(n,"BackInOut",(function(){return k})),i.d(n,"BounceIn",(function(){return Q})),i.d(n,"BounceOut",(function(){return F})),i.d(n,"BounceInOut",(function(){return A}));class r{constructor(){this.startTime=0,this.time=0,this.dt=0}start(){this.startTime=performance.now(),this.time=this.startTime,this.dt=0}stop(){this.startTime=0,this.time=0,this.dt=0}setTime(t){this.dt=t-this.time,this.time=t}}function s(t,e,i){return Math.max(e,Math.min(t,i))}function u(t){return t}function a(t){return t*t}function o(t){return t*(2-t)}function c(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}function h(t){return t*t*t}function f(t){return--t*t*t+1}function m(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}function d(t){return t*t*t*t}function l(t){return 1- --t*t*t*t}function p(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}function _(t){return t*t*t*t*t}function b(t){return--t*t*t*t*t+1}function y(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}function M(t){return 0===t?0:1===t?1:1-Math.cos(t*Math.PI/2)}function g(t){return 0===t?0:1===t?1:Math.sin(t*Math.PI/2)}function I(t){return 0===t?0:1===t?1:.5*(1-Math.cos(Math.PI*t))}function O(t){return 0===t?0:Math.pow(1024,t-1)}function w(t){return 1===t?1:1-Math.pow(2,-10*t)}function v(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}function S(t){return 1-Math.sqrt(1-t*t)}function T(t){return Math.sqrt(1- --t*t)}function E(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}function x(t){var e,i=.1;return 0===t?0:1===t?1:(!i||i<1?(i=1,e=.1):e=.4*Math.asin(1/i)/(2*Math.PI),-i*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4))}function P(t){var e,i=.1;return 0===t?0:1===t?1:(!i||i<1?(i=1,e=.1):e=.4*Math.asin(1/i)/(2*Math.PI),i*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/.4)+1)}function C(t){var e,i=.1,n=.4;return 0===t?0:1===t?1:(!i||i<1?(i=1,e=.1):e=n*Math.asin(1/i)/(2*Math.PI),(t*=2)<1?i*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/n)*-.5:i*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/n)*.5+1)}function B(t){var e=1.70158;return t*t*((e+1)*t-e)}function j(t){var e=1.70158;return--t*t*((e+1)*t+e)+1}function k(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}function Q(t){return 1-F(1-t)}function F(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function A(t){return t<.5?.5*Q(2*t):.5*F(2*t-1)+.5}class q extends class{constructor(){this._subscribers={}}on(t,e,i){return t&&e?(this._subscribers||(this._subscribers={}),this._subscribers[t]||(this._subscribers[t]=[]),i&&(e=e.bind(i)),this._subscribers[t].push(e),this):this}emit(t,...e){return t&&this._subscribers&&this._subscribers[t]?(this._subscribers[t].forEach(t=>t.apply(null,e)),this):this}off(t,e){if(!t)return this;if(e){let i=this._subscribers[t].indexOf(e);~i&&this._subscribers[t].splice(i,1)}else this._subscribers[t].length=0;return this}}{constructor(t={}){super(),this.name="Unnamed",this.active=!1,this.keyframes=[],this.time=0,this.timeEnd=0,this.timeScale=1,this.repeat=1,this.duration=0,this.timer=new r,t.name&&(this.name=t.name),t.repeat&&(this.repeat=t.repeat),t.timeScale&&(this.timeScale=t.timeScale);this.constructor.items.add(this)}static update(t){this.items.forEach(e=>{e.update(t)})}static plugin(t){this.plugins.add(t),t.mutateClass&&t.mutateClass(this)}add(t){return Array.isArray(t)?(t.forEach(t=>this.add(t)),this):(t instanceof q?this._addScrew(t):this._addFrame(t),this)}_addFrame(t){t=Object.assign({delay:0,duration:1e3,repeat:1,easing:c,_screw:this},t),this.keyframes.push(t),this._calculateTimings()}_addScrew(t){throw Error('Not implemented method "_addScrew"')}_calculateTimings(){this.duration=0,this.keyframes.forEach((t,e)=>{const i=this.keyframes[e-1]||{};let n=i._endTime||0;t.delay&&(n+=t.delay),"number"==typeof t.offset&&(n=t.offset),"prev"===t.offset&&(n=i._startTime||0),t._startTime=Math.max(n,0),t._endTime=n+t.duration*t.repeat,t._isBegan=!1,t._isCompleted=!1,this.duration=Math.max(t._endTime,this.duration)})}_resetFramesState(){this.keyframes.forEach(t=>{t._isBegan=!1,t._isCompleted=!1})}play(){if(this.active)throw new Error(`Screw ${this.name} is already playing.`);return 0===this.time&&(this._calculateTimings(),this.promise=new Promise((t,e)=>{this.on("complete",t),this.on("stop",e)})),this.active=!0,this.timer.start(),this.emit("play"),this._update(0),this}pause(){return this.active=!1,this.timer.stop(),this.emit("pause"),this}stop(){return this.active=!1,this.time=0,this.timer.stop(),this._resetFramesState(),this.emit("stop"),this}replay(){return this.time=0,this._resetFramesState(),this.emit("replay"),this.play()}update(t){!1!==this.active&&(this.timer.setTime(t),this._update(this.timer.dt))}_update(t){if(this.active){if(t*=this.timeScale,this.time<=0&&this.emit("begin"),this.time+=t,this.time>=this.duration&&--this.repeat>0)return this.time%=this.duration,this.time=s(this.time,0,this.duration),void this._resetFramesState();this.keyframes.forEach(e=>{e._isCompleted||(this.time>=e._startTime&&(!e._isBegan&&(this.time<=e._endTime||0===e.duration)&&this._frameBegin(e),t&&this.time<=e._endTime&&this._frameRun(e)),this.time>=e._endTime&&this._frameComplete(e))}),this.emit("update",t),this.time>=this.duration&&(this.emit("complete"),this.stop())}}_frameBegin(t){t.animate&&t.animate.forEach(e=>{if(e._target="function"==typeof e.target?e.target():e.target,!e._target)return console.warn("Animation target is not defined",e,t,this);if(e.from||(e.from={}),e._delta={},e.by)for(const t in e.by)null==e.from[t]&&(e.from[t]=e._target[t]),e._delta[t]=e.by[t];if(e.to)for(const t in e.to)null==e.from[t]&&(e.from[t]=e._target[t]),e._delta[t]=e.to[t]-e.from[t]}),t._isBegan=!0,t.begin&&t.begin(t)}_frameRun(t){let e=(this.time-t._startTime)/t.duration;if(e=s(e,0,t.repeat),e>1&&(e%=1,0===e&&(e=1)),t._time=e,t.animate){const i=t.easing(e);t.animate.forEach(t=>{if(t._target){for(const e in t._delta)t._target[e]=t.from[e]+i*t._delta[e];t.setter&&t.setter(t._target)}})}t.run&&t.run(t)}_frameComplete(t){this._frameRun(t),t._isCompleted=!0,t.complete&&t.complete(t)}}q.useDefaultAnimation=!0,q.items=new Set,q.plugins=new Set;e.default=q;const R="1.0.0";!function t(e=0){q.useDefaultAnimation&&(requestAnimationFrame(t),q.update(e))}(0)}])}));